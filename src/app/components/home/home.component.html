<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet">
  <!-- Carga la fuente de iconos de Google -->
  <title>Home</title>
</head>

<body>
  <header class="header">
    <img src="header.png" alt="header" class="header_img">
    <img src="logo.svg" alt="logo" class="header_logo">
  </header>

  <section>
    <div class="barra-busqueda">
      <div class="barra-busqueda_contenedor">
        <input #heroeInput type="text" class="barra-busqueda_contenedor_input" placeholder="Busca un héroe">
        <!--Coge de referencia el heroeInput para obtener su valor que es el héroe a filtrar-->
        <button mat-icon-button class="barra-busqueda_contenedor_icono" (click)="filtrarPorNombre(heroeInput.value)">
          <mat-icon>search</mat-icon>
        </button>
      </div>

      <div class="barra-busqueda_botones">
        <button mat-flat-button class="barra-busqueda_botones_boton" (click)="openCrearDialog()">
          <mat-icon>add</mat-icon>
          Crear nuevo héroe
        </button>
      </div>
    </div>
  </section>

  <section>
    <div class="heroes_txt">
      <h2>Héroes más allá de la imaginación</h2>
      <p>Desde tiempos inmemoriales, la humanidad ha soñado con figuras extraordinarias capaces de desafiar los límites
        de la realidad.</p>
    </div>
  </section>

  <!-- Loader que se muestra cuando 'loading' es true -->
  <div class="loader" *ngIf="loading">
    <mat-spinner mode="indeterminate" diameter="50"></mat-spinner>
  </div>

  <!-- Primero, verifica si loading es false y si lo es analiza segunda condición-->
  <div *ngIf="!loading">

    <!-- Sección donde se muestran los héroes filtrados si cumple condición y sino muestra todos-->
    <div *ngIf="heroesFiltrados.length > 0; else mostrarTodos" class="tarjeta-unica">
      <section class="hero-section">
        <div class="hero-section_grid">
          <!--Se recorre heroesCargados en vez de los filtrados porque mostramos una sola página de héroes
          no tods los héroes filtrados de golpe, de 8 en 8-->
          <div class="hero-section_grid_items" *ngFor="let heroe of heroesCargados">
            <mat-card class="hero-section_grid_items_card">
              <img mat-card-image [src]="heroe.imagen" alt="{{ heroe.name }}" class="hero-section_card-img">
              <mat-card-title class="hero-section_grid_items_card_title">{{ heroe.name }}</mat-card-title>
              <mat-card-subtitle class="hero-section_grid_items_card_subtitle">{{ heroe.poderes }}</mat-card-subtitle>
              <mat-card-content class="hero-section_grid_items_card_contenido">
                <p class="hero-section_grid_items_card_contenido_descripcion">{{ heroe.descripcion }}</p>
                <p class="hero-section_grid_items_card_contenido_lugar">{{ heroe.lugar }}</p>
              </mat-card-content>
              <mat-card-actions class="hero-section_grid_items_actions">
                <button mat-flat-button class="hero-section_grid_items_actions_editar"
                  (click)="openEditarDialog(heroe)"><mat-icon>edit</mat-icon>Editar</button>

                <button mat-flat-button class="hero-section_grid_items_actions_eliminar"
                  (click)="openEliminarDialog(heroe)">Eliminar</button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </section>
    </div>
  </div>

  <ng-template #mostrarTodos>
    <div *ngIf="heroesFiltrados.length === 0">
      <section class="hero-section">
        <div class="hero-section_grid">
          <div [id]="'heroe-' + heroe.id" class="hero-section_grid_items" *ngFor="let heroe of heroes">
            <mat-card class="hero-section_grid_items_card">
              <img mat-card-image [src]="heroe.imagen" alt="{{ heroe.name }}" class="hero-section_card-img">
              <mat-card-title class="hero-section_grid_items_card_title">{{ heroe.name }}</mat-card-title>
              <mat-card-subtitle class="hero-section_grid_items_card_subtitle">{{ heroe.poderes }}</mat-card-subtitle>
              <mat-card-content class="hero-section_grid_items_card_contenido">
                <p class="hero-section_grid_items_card_contenido_descripcion">{{ heroe.descripcion }}</p>
                <p class="hero-section_grid_items_card_contenido_lugar">{{ heroe.lugar }}</p>
              </mat-card-content>
              <mat-card-actions class="hero-section_grid_items_actions">
                <button mat-flat-button class="hero-section_grid_items_actions_editar"
                  (click)="openEditarDialog(heroe)"><mat-icon>edit</mat-icon>Editar
                </button>
                <button mat-flat-button class="hero-section_grid_items_actions_eliminar"
                  (click)="openEliminarDialog(heroe)">Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </section>
    </div>
  </ng-template>

  <!--Botón solo aparecerá si total de héroes es mayor que los héroes que ya han sido cargados-->
  <section class="ver-mas-section" *ngIf="heroesFiltrados.length > heroesCargados.length">
    <button mat-flat-button class="ver-mas-section_boton" (click)="cargarMas()">Ver más</button>
  </section>
  <app-footer></app-footer>
</body>

</html>